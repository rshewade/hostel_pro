## 3. Core Data Schema (High-Level)


### 3.1 Identity & Access
*   **Users:** `id, email, password_hash, role (STUDENT, SUPERINTENDENT, TRUSTEE, ACCOUNTS, PARENT), mobile_no, status (ACTIVE, INACTIVE, ALUMNI)`.
*   **Profiles:** `user_id, full_name, profile_type, details (jsonb)`.

### 3.2 Admissions Lifecycle (Refactored for Guest-First)
*   **Applications:**
    *   `id`: UUID
    *   `tracking_number`: Human-readable ID
    *   `type`: (NEW, RENEWAL)
    *   `parent_application_id`: Nullable (links to previous record for history)
    *   `applicant_mobile`: Verified via OTP (used before User creation)
    *   `student_user_id`: Nullable (populated ONLY after Final Approval/Promotion)
    *   `current_status`: (DRAFT, SUBMITTED, REVIEW, INTERVIEW, APPROVED, REJECTED, ARCHIVED)
    *   `data`: (jsonb) Stores all form responses.
*   **Documents:** `id, application_id, document_type, s3_key, verification_status`.
*   **Interviews:** `application_id, trustee_id, schedule_time, mode, internal_remarks, final_score`.

### 3.3 Stay & Operations
*   **Rooms & Allocations:** Tracking occupancy and historical room changes.
*   **Leaves:** `id, student_id, type, start_time, end_time, reason, status, parent_notified_at`.

### 3.4 Finance & Audit
*   **Fees & Transactions:** Multi-head accounting (Processing, Hostel, Security).
*   **AuditLogs:** Immutable history of all application status changes and financial updates.

